\documentclass[shownotes,aspectratio=169]{beamer}

\input{../../aux/tex/diapo_encabezado.tex}
\input{../../aux/tex/tikzlibrarybayesnet.code.tex}
 \mode<presentation>
 {
 %   \usetheme{Madrid}      % or try Darmstadt, Madrid, Warsaw, ...
 %   \usecolortheme{default} % or try albatross, beaver, crane, ...
 %   \usefonttheme{serif}  % or try serif, structurebold, ...
  \usetheme{Antibes}
  \setbeamertemplate{navigation symbols}{}
 }
 
\usepackage{todonotes}
\setbeameroption{show notes}

\newif\ifen
\newif\ifes
\newcommand{\en}[1]{\ifen#1\fi}
\newcommand{\es}[1]{\ifes#1\fi}
\estrue

%\title[Bayes del Sur]{}

\begin{document}

\color{black!85}
\large
 
%\setbeamercolor{background canvas}{bg=gray!15}


\begin{frame}[plain,noframenumbering]
 
 \begin{textblock}{90}(00,05)
\begin{center}
 \huge  \textcolor{black!66}{Creencias, datos y sorpresas}
\end{center}
\end{textblock}

 %\vspace{2cm}brown
%\maketitle
\Wider[2cm]{
\includegraphics[width=1\textwidth]{../../aux/static/peligro_predador}
}
\end{frame}

\begin{frame}[plain]

\centering

 \Large Modelos gr\'aficos
 
\end{frame}



\begin{frame}[plain]
 \only<1->{
 \begin{textblock}{160}(0,4)
 \centering \Large
 Modelos gr\'aficos
 \end{textblock}
}

 \only<1>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_0.pdf}
 \end{textblock}
 }
 
 \only<2>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_01.pdf}
 \end{textblock}
 }

  \only<3>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_02.pdf}
 \end{textblock}
 }
 
 \only<4>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_02bis.pdf}
 \end{textblock}
 }
 
 \only<5>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_03.pdf}
 \end{textblock}
 }
 
 \only<6>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_04.pdf}
 \end{textblock}
 }
 
 \only<7>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_05.pdf}
 \end{textblock}
 }
 \only<8>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_06.pdf}
 \end{textblock}
 }
 \only<9>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_07.pdf}
 \end{textblock}
 }
 \only<10>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_08.pdf}
 \end{textblock}
 }
 \only<11>{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_09.pdf}
 \end{textblock}
 }
 \only<12-31>{
 \begin{textblock}{160}(0,10)
 \centering
 
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_10.pdf}
 \end{textblock}
}
 \only<32->{
 \begin{textblock}{160}(0,10)
 \centering
  \includegraphics[width=0.85\textwidth]{figures/modelo_grafico_11.pdf}
 \end{textblock}
}


\only<13>{
\begin{textblock}{140}(10,68)
\begin{mdframed}[backgroundcolor=black!20]
 \centering 
  Los factores son \'utiles para definir distribuciones 
  
  de probabilidad en espacios de alta dimensi√≥n.
\end{mdframed}
\end{textblock}
}

\only<14>{
\begin{textblock}{130}(15,63)
\begin{flalign*}
 & P(d,p,r,c,a) = \color{white} P(d)P(p)P(r|d,p)P(a|r)P(c|p) && 
\end{flalign*}
\end{textblock}

}

\only<15>{
\begin{textblock}{130}(15,63)
\begin{flalign*}
 & P(d,p,r,c,a) = P(d)P(p|d)P(r|d,p)P(c|d,p,r)P(a|d,p,r,c) &&
\end{flalign*}
\end{textblock}
}

\only<16>{
\begin{textblock}{130}(15,63)
\begin{flalign*}
 & P(d,p,r,c,a) = P(d)P(p|\cancel{d})P(r|d,p)P(c|\cancel{d},p,\cancel{r})P(a|\cancel{d},\cancel{p},r,\cancel{c}) &&
\end{flalign*}
\end{textblock}
}

\only<17>{
\begin{textblock}{130}(15,63)
\begin{flalign*}
 & P(d,p,r,c,a) = P(d)P(p)P(r|d,p)P(a|r)P(c|p) && 
\end{flalign*}
\end{textblock}

}

\only<18>{
\begin{textblock}{130}(15,63)
\begin{flalign*}
 & P(d^1,p^1,r^1,c^1,a^1) = P(d^1)P(p^1)P(r^1|d^1,p^1)P(a^1|r^1)P(c^1|p^1) && 
\end{flalign*}
\end{textblock}
}


\only<19>{
\begin{textblock}{130}(15,63)
 \begin{flalign*}
  & P(d^1,p^1,r^1,c^1,a^1) =  0.85 \cdot P(p^1)P(r^1|d^1,p^1)P(a^1|r^1)P(c^1|p^1) &&
 \end{flalign*}
\end{textblock}


}

\only<20>{
\begin{textblock}{130}(15,63)
 \begin{flalign*}
  & P(d^1,p^1,r^1,c^1,a^1) = 0.85 \cdot 0.30 \cdot 0.50 \cdot 0.80 \cdot 0.90 \color{white} \approx 0.09 &&
 \end{flalign*}
\end{textblock}
}


\only<21>{
\begin{textblock}{130}(15,63)
 \begin{flalign*}
  & P(d^1,p^1,r^1,c^1,a^1) = 0.85 \cdot 0.30 \cdot 0.50 \cdot 0.80 \cdot 0.90 \approx 0.09 &&
 \end{flalign*}
\end{textblock}

}


\only<22>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) =  \color{white}  \sum_{i,j,l,m} P(d^i,p^j,r^1,c^l,a^m) \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}


\only<23>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \sum_i \sum_j \sum_l \sum_m P(d^i,p^j,r^1,c^l,a^m)  \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}

\only<24>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \sum_{i,j,l,m} P(d^i,p^j,r^1,c^l,a^m)  \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}


\only<25>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \sum_{i,j,l,m} P(d^i) P(p^j) P(r^1|d^i,p^j) P(c^l|p^j)P(a^m|r^1)  \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}

\only<26>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \left(\sum_m P(a^m|r^1) \right) \Bigg( \sum_{i,j,l} P(d^i) P(p^j) P(r^1|d^i,p^j) P(c^l|p^j) \Bigg)  &&
 \end{flalign*}
 \end{textblock}
}

\only<27>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \left(\sum_m P(a^m|r^1) \right) \Bigg( \sum_{i,j} P(d^i) P(p^j) P(r^1|d^i,p^j) \Big( \sum_l P(c^l|p^j) \Big) \Bigg)  &&
 \end{flalign*}
 \end{textblock}
}


\only<28>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \left( \cancel{\sum_m P(a^m|r^1)} \right) \Bigg( \sum_{i,j} P(d^i) P(p^j) P(r^1|d^i,p^j) \Big( \sum_l P(c^l|p^j) \Big) \Bigg)   &&
 \end{flalign*}
 \end{textblock}
}

\only<29>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \left( \cancel{\sum_m P(a^m|r^1)} \right) \Bigg( \sum_{i,j} P(d^i) P(p^j) P(r^1|d^i,p^j) \Big( \cancel{\sum_l P(c^l|p^j)} \Big) \Bigg) &&
 \end{flalign*}
 \end{textblock}
}

\only<30>{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  & P(r^1) = \sum_{i,j} P(d^i) P(p^j) P(r^1|d^i,p^j)   \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}

\only<31->{
 \begin{textblock}{130}(15,60)
 \begin{flalign*}
  &P(r^1) = \sum_{i,j} P(d^i) P(p^j) P(r^1|d^i,p^j) \approx 0.23 \color{white} \left(\sum_i P(d^i)\right) &&
 \end{flalign*}
 \end{textblock}
}


\only<32>{
 \begin{textblock}{130}(15,70)
 \begin{flalign*}
  &P(r^1|p^0) = \color{white}  \Bigg(\sum_i P(d^i)\Bigg)  &&
 \end{flalign*}
 \end{textblock}
}

\only<33>{
 \begin{textblock}{130}(15,70)
 \begin{flalign*}
  &P(r^1|p^0) = \frac{P(r^1,p^0)}{P(p^0)} \color{white}  \Bigg(\sum_i P(d^i)\Bigg)  &&
 \end{flalign*}
 \end{textblock}
}


\only<34>{
 \begin{textblock}{130}(15,70)
 \begin{flalign*}
  &P(r^1|p^0) = \frac{1}{P(p^0)} \sum_{i,l,m} P(d^i) P(p^0) P(r^1|d^i,p^0) P(c^l|p^0)P(a^m|r^k)  \color{white}  \Bigg(\sum_i P(d^i)\Bigg)  &&
 \end{flalign*}
 \end{textblock}
}

\only<35>{
 \begin{textblock}{130}(15,70)
 \begin{flalign*}
  &P(r^1|p^0) = \frac{1}{P(p^0)} \sum_{i} P(d^i) P(p^0) P(r^1|d^i,p^0) \color{white}  \Bigg(\sum_i P(d^i)\Bigg)  &&
 \end{flalign*}
 \end{textblock}
}

\only<36>{
 \begin{textblock}{130}(15,70)
 \begin{flalign*}
  &P(r^1|p^0) = \frac{1}{P(p^0)} \sum_{i} P(d^i) P(p^0) P(r^1|d^i,p^0) \approx 0.09 \color{white}  \Bigg(\sum_i P(d^i)\Bigg)  &&
 \end{flalign*}
 \end{textblock}
}



\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \Large Flujos de inferencia
\end{textblock}

\only<2->{
\begin{textblock}{160}(0,18)
\centering
 \begin{tabular}{c c|c}
 & $\hfrac{\text{Intermedio}}{\text{no observable}}$ &   $\hfrac{\text{Intermedio}}{\text{observable}}$ \\
 & & \\
 $ p \rightarrow r \rightarrow a $    & \onslide<3->{$P(a) \overset{?}{=} P(a|p)$} & \onslide<4->{$P(a|r) \overset{?}{=} P(a|p,r)$} \\ 
 $a \leftarrow r \leftarrow p $      &  \onslide<5->{$P(p) \overset{?}{=} P(p|a)$}  & \onslide<6->{$P(p|r) \overset{?}{=} P(p|a,r)$} \\ 
 $ r \leftarrow p \rightarrow c $     & \onslide<7->{$P(c) \overset{?}{=} P(c|r)$} & \onslide<8->{$P(c|p) \overset{?}{=} P(c|r,p)$} \\
 $ d \rightarrow r \leftarrow p $     & \onslide<9->{$P(p) \overset{?}{=} P(p|d)$} & \onslide<10->{$P(p|r) \overset{?}{=} P(p|d,r)$} \\
                                      & \onslide<11->{$P(p) \overset{?}{=} P(p|d)$} & \onslide<11->{$P(p|a) \overset{?}{=} P(p|d,a)$}
 \end{tabular} 
 \end{textblock}
 }
 
 
\only<13->{
\footnotesize
\begin{textblock}{140}(10,60)

\begin{framed}

 Un flujo de inferencia permenece abierto si:
 \begin{itemize}
  \item[$\bullet$] Toda consecuencia com\'un (o alguno de sus descendientes) es observable
  \item[$\bullet$] Ning\'una otra variable es observable
 \end{itemize}
 \end{framed}

\end{textblock}

}

\only<14>{
\begin{textblock}{128}(0,92)
\tiny \centering
\href{http://93.174.95.29/_ads/6B4DC58C0028F2BBEAA2CC9204F01845}{Pearl, J. 2018. The Book of Why: The New Science of Cause and Effect}
\end{textblock}
}


\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \Large Factor graph
\end{textblock}
\vspace{1cm}

\only<1>{
 \begin{textblock}{160}(0,18)
\begin{equation*}
g(x_1,\dots,x_n) = \prod f_j(X) 
\end{equation*}
\end{textblock}
}
\only<2->{
\begin{textblock}{160}(0,18)
\begin{equation*}
g(x_1,x_2,x_3,x_4,x_5) = f_A(x_1)f_B(x_2)f_C(x_1,x_2,x_3)f_D(x_3,x_4)f_E(x_3,x_5)
\end{equation*}
\end{textblock}

}

\only<3->{
\begin{textblock}{160}(0,26)
\begin{figure}[H]
 \centering
  \includegraphics[width=0.6\textwidth]{figures/factorGraph} 
\end{figure}
\end{textblock}
}

\vspace{0.2cm}

\only<4>{
\begin{textblock}{140}(10,64)

Un factor graph sin ciclos codifica:
\begin{itemize}
 \item[$\bullet$] La factorizaci\'on de una funci\'on $g(x_1,\dots,x_n)$ \color{white}
 \item[$\bullet$] \textbf{Las operaciones para computar sus marginales} $g_i(x_i)$
\end{itemize}  
\end{textblock}
}


\only<5>{
\begin{textblock}{140}(10,64)

Un factor graph sin ciclos codifica:
\begin{itemize}
 \item[$\bullet$] La factorizaci\'on de una funci\'on $g(x_1,\dots,x_n)$ 
 \item[$\bullet$] \textbf{Las operaciones para computar sus marginales} $g_i(x_i)$
\end{itemize}  
\end{textblock}
}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering Ejemplo
\end{textblock}
\vspace{1cm}

\only<1-3>{
\begin{textblock}{160}(0,12)
\footnotesize
\begin{equation*}
 g_1(x_1) = \sum_{x_2}\sum_{x_3}\sum_{x_4}\sum_{x_5} f_A(x_1)f_B(x_2)f_C(x_1,x_2,x_3)  f_D(x_3,x_4) f_E(x_3,x_5) 
\end{equation*}

\end{textblock}

}

\only<2-3>{
\begin{textblock}{160}(0,18)
\begin{figure}[H]
\centering
  \begin{subfigure}[b]{0.42\textwidth} 
  \centering
    \includegraphics[width=0.75\textwidth]{figures/factorGraph_margin1} 
    %\caption*{$g_1(x_1)$}
  \end{subfigure} 
% \ \ \
%   \begin{subfigure}[b]{0.45\textwidth} 
%   \centering
%     \includegraphics[width=1\textwidth]{figures/factorGraph_margin3} 
%    %\caption*{$g_3(x_3)$}
%   \end{subfigure} 
\end{figure}
\end{textblock}
}


\only<3>{
\begin{textblock}{160}(0,76)
\footnotesize
\begin{equation*}
 g_1(x_1) = f_A(x_1) \left(\sum_{x_2, x_3} f_B(x_2) f_C(x_1,x_2,x_3) \left( \sum_{x_4} f_D(x_3,x_4) \right) \left( \sum_{x_5} f_E(x_3,x_5) \right) \right)
\end{equation*}
% 
% \begin{equation*}
%  g_3(x_3) =  \left( \sum_{\setminus x_3} f_A(x_1)f_B(x_2)f_C(x_1,x_2,x_3)  \right) \left( \sum_{\setminus x_3} f_D(x_3,x_4) \right) \left( \sum_{\setminus x_3} f_E(x_3,x_5) \right) 
% \end{equation*}
\end{textblock}

}

\only<4->{
\begin{textblock}{160}(0,12)
\footnotesize
\begin{equation*}
 g_3(x_3) = \sum_{x_1}\sum_{x_2}\sum_{x_4}\sum_{x_5} f_A(x_1)f_B(x_2)f_C(x_1,x_2,x_3)  f_D(x_3,x_4) f_E(x_3,x_5) 
\end{equation*}

\end{textblock}

}

\only<4->{
\begin{textblock}{160}(0,22)
\begin{figure}[H]
\centering
%   \begin{subfigure}[b]{0.42\textwidth} 
%   \centering
%     \includegraphics[width=0.75\textwidth]{figures/factorGraph_margin1} 
%     %\caption*{$g_1(x_1)$}
%   \end{subfigure} 
% \ \ \
  \begin{subfigure}[b]{0.45\textwidth} 
  \centering
    \includegraphics[width=0.85\textwidth]{figures/factorGraph_margin3} 
   %\caption*{$g_3(x_3)$}
  \end{subfigure} 
\end{figure}
\end{textblock}
}

\only<5>{
\begin{textblock}{160}(0,76)
\footnotesize
% \begin{equation*}
%  g_1(x_1) = f_A(x_1) \left(\sum_{x_2, x_3} f_B(x_2) f_C(x_1,x_2,x_3) \left( \sum_{x_4} f_D(x_3,x_4) \right) \left( \sum_{x_5} f_E(x_3,x_5) \right) \right)
% \end{equation*}
% 
\begin{equation*}
 g_3(x_3) =  \left( \sum_{x_1,x_2} f_A(x_1)f_B(x_2)f_C(x_1,x_2,x_3)  \right) \left( \sum_{x_4} f_D(x_3,x_4) \right) \left( \sum_{x_5} f_E(x_3,x_5) \right) 
\end{equation*}
\end{textblock}

}


\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \Large
 Sum-product algorithm
\end{textblock}

\only<1->{
\begin{textblock}{80}(45,30)
\begin{description}
 \item[$m_{x \rightarrow f}(x)$ :] Mensaje de variable $x$ a factor $f$ 
 \item[$m_{f \rightarrow x}(x)$ :] Mensaje factor $f$ a variable $x$
 \item[$n(v)$ :] Conjunto de nodos vecinos del nodo $v$
\end{description}
\end{textblock}
}

\only<1->{
\begin{textblock}{80}(45,16)
\begin{equation*}
P(x) = \prod_{h \in n(x)} m_{h \rightarrow x} 
\end{equation*} 
\end{textblock}
}

\only<2->{
\begin{textblock}{80}(45,56)
\begin{equation*}\label{eq:m_v_f}
m_{x \rightarrow f}(x) = \prod_{h \in n(x) \setminus \{f\} } m_{h \rightarrow x}(x) 
\end{equation*}
\end{textblock}
}

\only<3->{
\begin{textblock}{80}(45,68)
\begin{equation*}\label{eq:m_f_v}
 m_{f \rightarrow x}(x) = \sum_{X\setminus \{x\} } \Big( f(X) \prod_{h \in n(f) \setminus \{x\} } m_{h \rightarrow f}(h) \Big) 
\end{equation*}
\end{textblock}
}

\only<1->{
\begin{textblock}{45}(5,10)
\centering
\begin{figure}[H]
\centering
  \scalebox{.8}{
\tikz{ %
        
        
        \node[det, fill=black!10] (r) {$r_{ab}$} ; %
        
        \node[factor, above=of r] (fr) {} ;
        \node[const, right=of fr] (dfr) {\large $f_r$}; 
        \node[latent, above=of fr, xshift=-0.8cm] (p1) {$p_a$} ; %
        \node[latent, above=of fr, xshift=0.8cm] (p2) {$p_b$} ; %
        
        \node[factor, above=of p1] (fp1) {} ;
        \node[factor, above=of p2] (fp2) {} ;
        \node[const, right=of fp2] (dp) {\large $f_p$};
        
        
        \node[latent, above=of fp1] (s1) {$s_a$} ; %
        \node[latent, above=of fp2] (s2) {$s_b$} ; %        
        
        \node[factor, above=of s1] (fs1) {} ;
        \node[factor, above=of s2] (fs2) {} ;                        \node[const, right=of fs2] (ds) {\large $f_s$};

        
        
        \node[invisible, right=of s2, xshift=1.5cm] (s-dist) {};
        
        \edge[-] {fr} {r};
        \edge[-] {p1} {fr};
        \edge[-] {p2} {fr};
        \edge[-] {fp1} {p1};
        \edge[-] {fp2} {p2};
        \edge[-] {s1} {fp1};
        \edge[-] {s2} {fp2};
        \edge[-] {fs1} {s1};
        \edge[-] {fs2} {s2};
        } 
}   
\end{figure}
\end{textblock}
}

% % 
\only<4>{
\begin{textblock}{160}(0,87)
\centering \tiny
\href{https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=910572}{Kschischang FR, Frey BJ, Loeliger HA. Factor graphs and the sum-product algorithm. 2001}
\end{textblock}
}


\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \Large TrueSkill
\end{textblock}

\vspace{1cm}
\Wider[2cm]{
\begin{figure}[h!]
  \centering
  \scalebox{.8}{
  \tikz{
      
        \node[factor] (fr) {} ;
        \node[const, right=of fr] (nfr) {$f_{r}$}; %
	
	\node[latent, above=of fr, yshift=-0.4cm] (d) {$d$} ; %
        \node[factor, above=of d, yshift=-0.4cm] (fd) {} ;
        \node[const, above=of fd] (nfd) {$f_{d}$}; %
	
        
        \node[latent, left=of fd,xshift=0.4cm] (ta) {$t_a$} ; %
        \node[factor, left=of ta,xshift=0.4cm] (fta) {} ;
        \node[const, above=of fta] (nfta) {$f_{t_a}$}; %
        
        \node[latent, left=of fta,yshift=1cm,xshift=0.4cm] (p1) {$p_1$} ; %
        \node[factor, left=of p1,xshift=0.4cm] (fp1) {} ;
        \node[const, above=of fp1] (nfp1) {$f_{p_1}$}; %
        
        \node[latent, left=of fp1,xshift=0.4cm] (s1) {$s_1$} ; %
        \node[factor, left=of s1,xshift=0.4cm] (fs1) {} ;
	\node[const, above=of fs1] (nfs1) {$f_{s_1}$}; %
     
        \node[latent, left=of fta,yshift=-1cm,xshift=0.4cm] (p2) {$p_2$} ; %
        \node[factor, left=of p2,xshift=0.4cm] (fp2) {} ;
        \node[const, above=of fp2] (nfp2) {$f_{p_2}$}; %
        
        \node[latent, left=of fp2,xshift=0.4cm] (s2) {$s_2$} ; %
        \node[factor, left=of s2,xshift=0.4cm] (fs2) {} ;
	\node[const, above=of fs2] (nfs2) {$f_{s_2}$}; %
        
            
        \node[latent, right=of fd,xshift=-0.4cm] (tb) {$t_b$} ; %
        \node[factor, right=of tb,xshift=-0.4cm] (ftb) {} ;
        \node[const, above=of ftb] (nftb) {$f_{t_b}$}; %
        
        \node[latent, right=of ftb,yshift=1cm,xshift=-0.4cm] (p3) {$p_3$} ; %
        \node[factor, right=of p3,xshift=-0.4cm] (fp3) {} ;
        \node[const, above=of fp3] (nfp3) {$f_{p_3}$}; %
        
        \node[latent, right=of fp3,xshift=-0.4cm] (s3) {$s_3$} ; %
        \node[factor, right=of s3,xshift=-0.4cm] (fs3) {} ;
	\node[const, above=of fs3] (nfs3) {$f_{s_3}$}; %
     
        \node[latent, right=of ftb,yshift=-1cm,xshift=-0.5cm] (p4) {$p_4$} ; %
        \node[factor, right=of p4,xshift=-0.4cm] (fp4) {} ;
        \node[const, above=of fp4] (nfp4) {$f_{p_4}$}; %
        
        \node[latent, right=of fp4,xshift=-0.4cm] (s4) {$s_4$} ; %
        \node[factor, right=of s4,xshift=-0.4cm] (fs4) {} ;
	\node[const, above=of fs4] (nfs4) {$f_{s_4}$}; %
     
        \edge[-] {fr} {d};
	\edge[-] {d} {fd};
	
        \edge[-] {fd} {ta};
        \edge[-] {ta} {fta};
        \edge[-] {fta} {p1};
        \edge[-] {p1} {fp1};
        \edge[-] {fp1} {s1};
        \edge[-] {s1} {fs1};
        \edge[-] {fta} {p2};
        \edge[-] {p2} {fp2};
        \edge[-] {fp2} {s2};
        \edge[-] {s2} {fs2};
        	
	\edge[-] {fd} {tb};
        \edge[-] {tb} {ftb};
        \edge[-] {ftb} {p3};
        \edge[-] {p3} {fp3};
        \edge[-] {fp3} {s3};
        \edge[-] {s3} {fs3};
        \edge[-] {ftb} {p4};
        \edge[-] {p4} {fp4};
        \edge[-] {fp4} {s4};
        \edge[-] {s4} {fs4};
        
	
	\node[const, below=of fr,xshift=8cm,yshift=-0.3cm] (dfr) { $f_r = \mathbb{I}(d>0)$}; %
	\node[const, left=of dfr,xshift=-0.5cm] (dfd) {$f_d = \mathbb{I}(d=t_a - t_b)$}; %
	\node[const, left=of dfd,xshift=-0.5cm] (dft) {$f_{t_e} = \mathbb{I}(t_e = \sum_{i \in A_e} p_i)$}; %
        \node[const, left=of dft,xshift=-0.5cm] (dfp) {$f_{p_i} = \N(p_i|s_i,\beta^2)$}; %
        \node[const, left=of dfp,xshift=-0.5cm] (dfs) {$f_{s_i} = \N(s_i|\mu_i,\sigma^2)$}; %
   }
   }
\end{figure}
}
\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \Large Propiedades 
\end{textblock}

\footnotesize

\only<1->{
\begin{textblock}{160}(0,15)
\begin{equation*}\label{eq:simetria}
 \N(x|\mu,\sigma^2) = \N(\mu|x,\sigma^2) = \N(-\mu|-x,\sigma^2) = \N(-x|-\mu,\sigma^2) 
\end{equation*}
\end{textblock}
}

\only<2->{
\begin{textblock}{160}(0,30)
\begin{equation*}\label{eq:estandarizar}
 \N(x|\mu,\sigma^2) = \N( \frac{X-\mu}{\sigma} | 0,1)
\end{equation*}
\end{textblock}
}

\only<3->{
\begin{textblock}{160}(0,45)
\begin{equation*}\label{eq:phi_norm}
 \frac{\partial}{\partial x} \Phi(x|\mu,\sigma^2) = \N(x|\mu,\sigma^2)
\end{equation*}
\end{textblock}
}

\only<4->{
\begin{textblock}{160}(0,60)
\begin{equation*}\label{eq:integral_con_indicadora}
  \iint_{-\infty}^{\infty}  \mathbb{I}(x=h(y,z)) \, f(x) \,  g(y)\, dx\, dy 
 = \int_{-\infty}^{\infty} f(h(y,z)) \, g(y) \, dy 
\end{equation*}

\end{textblock}
}


\only<5>{
\begin{textblock}{160}(0,75)
\begin{equation*}\label{eq:multiplicacion_normales}
 \int_{-\infty}^{\infty} N(x|\mu_x,\sigma_x^2)N(x|\mu_y,\sigma_y^2) \, dx  \overset{*}{=} \int_{-\infty}^{\infty}  \underbrace{N(\mu_x|\mu_y,\sigma_x^2+\sigma_y^2)}_{\text{constante}} \underbrace{ N(x|\mu_{*},\sigma_{*}^2) dx}_{\text{integra } 1} 
\end{equation*}
\end{textblock}
}


\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering  \large $m_{f_{s} \rightarrow s}(s)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)

\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fs_s} 
\end{textblock}

}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{s_i} \rightarrow s_i}(s_i) & = \onslide<2>{\int f_{s_i}(\bm{x}) \prod_{h \in n(f_{s_i}) \setminus \{s_i\} } m_{h \rightarrow f_{s_i}}(h) d\bm{x}_{\setminus \{s_i\}} }&&
\end{flalign*}
\end{textblock}
}

\only<3-4>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
m_{f_{s_i} \rightarrow s_i}(s_i)  & = \int N(s_i| \mu_i, \sigma_i^2) d\bm{x}_{\setminus \{s_i\} }  \onslide<4>{ = N(s_i| \mu_i, \sigma_i^2)} &&
\end{flalign*}
\end{textblock}
}



\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering $m_{s \rightarrow f_p}(s)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_s_fp} 
\end{textblock}
}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{s_i \rightarrow f_{p_i}}(s_i) & = \onslide<2>{\prod_{h \in n(s_i) \setminus \{f_{p_i}\} } m_{h \rightarrow s_i}(s_i)} \color{white}\int  &&
\end{flalign*}
\end{textblock}
}

\only<3>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{s_i \rightarrow f_{p_i}}(s_i) & =  N(s_i| \mu_i, \sigma_i^2) \color{white}\int  &&
\end{flalign*}
\end{textblock}
}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \large $m_{f_p \rightarrow p}(p)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fp_p}   
\end{textblock}
}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{p_i} \rightarrow p_i}(p_i) & = \onslide<2>{ \int f_{p_i}(\bm{x}) \Big( \prod_{h \in n(f_{p_i}) \setminus \{p_i\} } m_{h \rightarrow f_{p_i}}(h) \Big) d\bm{x}_{\setminus \{p_i\}}} &&
\end{flalign*}
\end{textblock}
}

\only<3->{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{p_i} \rightarrow p_i}(p_i) & = \int N(p_i|s_i,\beta^2)\, N(s_i|\mu_i, \sigma_i^2) \, ds_i \onslide<4->{ = \int N(s_i|p_i,\beta^2)\, N(s_i|\mu_i, \sigma_i^2) \, ds_i } \\
  \onslide<5->{ & =\int  \underbrace{N(p_i|\mu_i,\beta^2+\sigma_i^2)}_{\text{const.}} \underbrace{ N(s_i|\mu_{*},\sigma_{*}^2) \, ds_i}_{1} } 
  \onslide<6>{ =N(p_i|\mu_i,\beta^2+\sigma_i^2)} &&
\end{flalign*}
\end{textblock}

}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \large $m_{p \rightarrow f_t}(p)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_p_ft}   
\end{textblock}
}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{p_i \rightarrow f_{t_e}}(p_i) & = \onslide<2>{\prod_{h \in n(p_i) \setminus \{f_{t_e}\} } m_{h \rightarrow p_i}(p_i)} \color{white}\int  &&
\end{flalign*}
\end{textblock}
}

\only<3>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{p_i \rightarrow f_{t_e}}(p_i) & = \prod_{i \in e} N(p_i|\mu_i, \beta^2 + \sigma_i^2) \color{white}\int  &&
\end{flalign*}
\end{textblock}
}


\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \large $m_{f_t \rightarrow t}(t)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_ft_t} 
\end{textblock}
}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{t_e} \rightarrow t_e}(t_e) & = \onslide<2>{ \int f_{t_e}(\bm{x}) \Big( \prod_{h \in n(f_{t_e}) \setminus \{t_e\} } m_{h \rightarrow f_{t_e}}(h) \Big) d\bm{x}_{\setminus \{t_e\}}} &&
\end{flalign*}
\end{textblock}
}

\only<3-4>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{t_e} \rightarrow t_e}(t_e) \onslide<3->{& = \iint \mathbb{I}(t_e = p_i + p_j) N(p_i|\mu_i,\beta^2 + \sigma_i^2)N(p_j|\mu_j,\beta^2 + \sigma_j^2) dp_idp_j \\}
  \onslide<4->{& = \int N(p_i|\mu_i,\beta^2 + \sigma_i^2) N(t_e - p_i|\mu_j,\beta^2 + \sigma_j^2) dp_i   \\}
    &&
\end{flalign*}
\end{textblock}
}
% 
\only<5-6>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{t_e} \rightarrow t_e}(t_e) & = \iint \mathbb{I}(t_e = p_i + p_j) N(p_i|\mu_i,\beta^2 + \sigma_i^2)N(p_j|\mu_j,\beta^2 + \sigma_j^2) dp_idp_j \\
  & = \int N(p_i|\mu_i,\beta^2 + \sigma_i^2) N(p_i|t_e - \mu_j,\beta^2 + \sigma_j^2) dp_i   \\
  \onslide<6->{& = \int \underbrace{N(t_e|\mu_i+\mu_j,2\beta^2 + \sigma_i^2 + \sigma_j^2)}_{\text{const.}} \underbrace{N(p_i|\mu_{*},\sigma_{*}^2) dp_i}_{1} \\ }
    &&
\end{flalign*}
\end{textblock}
}

\only<7>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{t_e} \rightarrow t_e}(t_e) & = \iint \mathbb{I}(t_e = p_i + p_j) N(p_i|\mu_i,\beta^2 + \sigma_i^2)N(p_j|\mu_j,\beta^2 + \sigma_j^2) dp_idp_j \\
  & = \int N(p_i|\mu_i,\beta^2 + \sigma_i^2) N(p_i|t_e - \mu_j,\beta^2 + \sigma_j^2) dp_i   \\[0.15cm]
  & = N(t_e|\mu_i+\mu_j,2\beta^2 + \sigma_i^2 + \sigma_j^2) \color{white} \sum_{i \in A_e} &&
\end{flalign*}
\end{textblock}
}

\only<8->{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_{t_e} \rightarrow t_e}(t_e) & = \iint \mathbb{I}(t_e = p_i + p_j) N(p_i|\mu_i,\beta^2 + \sigma_i^2)N(p_j|\mu_j,\beta^2 + \sigma_j^2) dp_idp_j \\
  & = \int N(p_i|\mu_i,\beta^2 + \sigma_i^2) N(p_i|t_e - \mu_j,\beta^2 + \sigma_j^2) dp_i   \\[0.15cm]
  & = N(t_e|\sum_{i \in A_e} \mu_i,\sum_{i \in A_e} \beta^2 + \sigma_i^2) \onslide<9>{= N(t_e| \mu_e, \sigma_e^2)} &&
\end{flalign*}
\end{textblock}
}

\end{frame}


% \begin{frame}[plain]
% \begin{textblock}{108}(10,8)
%  \centering $m_{t \rightarrow f_d}(t)$
% \end{textblock}
% 
% \only<1->{
% \begin{textblock}{120}(20,10)
% \centering
% %  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_t_fd} 
%   
% \end{textblock}
% 
% 
% \only<1-2>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%  m_{t_e \rightarrow f_{d}}(t_e) & = \onslide<2>{\prod_{h \in n(t_e) \setminus \{f_{d}\} } m_{h \rightarrow t_e}(t_e)} \color{white}\int  &&
% \end{flalign*}
% \end{textblock}
% }
% 
% \only<3>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%  m_{t_e \rightarrow f_{d}}(t_e) & =  N(t_e| \mu_e, \sigma_e^2) \color{white}\int  &&
% \end{flalign*}
% \end{textblock}
% }
% 
% }
% 
% \end{frame}
% 

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering $m_{f_d\rightarrow d}(d)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fd_d} 
\end{textblock}
}

\only<1-2>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_d \rightarrow d}(d) & = \onslide<2>{ \int f_d(\bm{x}) \Big( \prod_{h \in n(f_d) \setminus \{d\} } m_{h \rightarrow f_d}(h) \Big) d\bm{x}_{\setminus \{d\}}} &&
\end{flalign*}
\end{textblock}
}

\only<3-4>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_d \rightarrow d}(d) & = \iint \mathbb{I}(d= t_a - t_b) N(t_a | \mu_a, \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_a dt_b \\
 & \onslide<4>{ = \int N(d + t_b | \mu_a, \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_b }&&
\end{flalign*}
\end{textblock}
}

\only<5-6>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_d \rightarrow d}(d) & = \iint \mathbb{I}(d= t_a - t_b) N(t_a | \mu_a, \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_a dt_b \\
 &  = \int N( t_b | \mu_a - d , \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_b \\
 & \onslide<6>{= \int \underbrace{N(d|\mu_a -\mu_b, \sigma_a^2 + \sigma_b^2)}_{\text{const.}} \, \underbrace{N(t_b|\mu_{*},\sigma_{*}^2) \, dt_b}_{1} } &&
\end{flalign*}
\end{textblock}
}

\only<7>{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_d \rightarrow d}(d) & = \iint \mathbb{I}(d= t_a - t_b) N(t_a | \mu_a, \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_a dt_b \\
 &  = \int N( t_b | \mu_a - d , \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_b \\[0.12cm]
 & = N(d|\, \mu_a -\mu_b, \sigma_a^2 + \sigma_b^2)  &&
\end{flalign*}
\end{textblock}
}


\only<8->{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_d \rightarrow d}(d) & = \iint \mathbb{I}(d= t_a - t_b) N(t_a | \mu_a, \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_a dt_b \\
 &  = \int N( t_b | \mu_a - d , \sigma_a^2) N(t_b | \mu_b, \sigma_b^2) \, dt_b \\[0.12cm]
 & = N(d|\underbrace{\mu_a -\mu_b}_{\hfrac{\text{Diferencia}}{\text{esperada}} \delta }, \underbrace{\sigma_a^2 + \sigma_b^2}_{\hfrac{\text{Varianza}}{\text{total}} \, \vartheta } ) \onslide<9>{ = N(d| \delta, \vartheta^2)} &&
\end{flalign*}
\end{textblock}
}


\end{frame}
% 
% \begin{frame}[plain]
% \begin{textblock}{160}(0,4)
%  \centering $m_{d\rightarrow f_r}(d)$
% \end{textblock}
% 
% \only<1->{
% \begin{textblock}{120}(20,10)
% \centering
%   \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_d_fr} 
% \end{textblock}
% }
% 
% \only<1-2>{
% \begin{textblock}{140}(10,50)
%   \begin{flalign*}
%  m_{t_e \rightarrow f_{d}}(t_e) & = \onslide<2>{N(d|\delta,\vartheta^2)} \color{white}\int  &&
% \end{flalign*}
% \end{textblock}
% }
% 
% \end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering $m_{f_r\rightarrow r}(r)$
\end{textblock}

\only<1->{
\begin{textblock}{120}(20,10)
\centering
  \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fr_r} 
\end{textblock}
}

\only<1->{
\begin{textblock}{140}(10,50)
  \begin{flalign*}
 m_{f_r \rightarrow r}(r) & = \onslide<2->{ \int \mathbb{I}(d>0) N(d|\delta,\vartheta^2) \, dd} \\
 \onslide<3->{& = \int_0^\infty N(d|\delta,\vartheta^2) \, dd } \\
 \onslide<4->{& = 1 - \Phi(0 | \delta, \vartheta^2)} \onslide<6->{ = \Phi\Big(\frac{\delta}{\vartheta}\Big)} &&
\end{flalign*}
\end{textblock}
}

\only<5->{
\begin{textblock}{80}(80,45)
\centering
 \includegraphics[width=0.55\textwidth]{figures/evidence} 
\end{textblock}

}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \Large Evidencia
\end{textblock}

\begin{equation*}
P(r| s, A) = \Phi \Big(\frac{\delta}{\vartheta} \Big)
\end{equation*}

\end{frame}
% 
% 
% \subsection{Mensaje ascendete}
% 
% \begin{frame}
% \begin{textblock}{108}(10,8)
% \begin{center}
%  \large $m_{f_r\rightarrow d}(d)$
% \end{center}
% \end{textblock}
% \only<1->{
% \begin{textblock}{108}(10,18)
% \centering
%   \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fr_d} 
% \end{textblock}
% }
% 
% \only<1->{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_r\rightarrow d}(d) = \onslide<2>{\mathbb{I}(d>0)}  \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% \end{frame}
% 
% \begin{frame}
% \begin{textblock}{108}(10,8)
% \begin{center}
%  \large $m_{f_d\rightarrow t_a}(t_a)$
% \end{center}
% \end{textblock}
% \only<1->{
% \begin{textblock}{108}(10,18)
% \centering
%   \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fd_ta} 
% \end{textblock}
% }
% 
% \only<1-2>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     m_{f_d\rightarrow t_a}(t_a) &= \onslide<2->{\iint \mathbb{I}(d=t_a-t_b) \mathbb{I}(d>0) N(t_b|\mu_b,\sigma_b^2) \, dt_b  \, dd } \\
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<3->{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     m_{f_d\rightarrow t_a}(t_a) &= \int \mathbb{I}(t_a>t_b) N(t_b|\mu_b,\sigma_b^2) \, dt_b  \, dd  \\
%     \onslide<5->{&= \Phi(t_a| \mu_b, \sigma_b^2)}
%     \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% 
% \only<4->{
% \begin{textblock}{48}(80,46)
%  \includegraphics[width=0.9\textwidth]{figures/m_d_ta} 
% \end{textblock}
% }
% 
% 
% 
% 
% 
% \end{frame}
% 
% 
% \begin{frame}
% \begin{textblock}{108}(10,8)
% \begin{center}
%  \large $m_{f_t \rightarrow p}(p)$
% \end{center}
% \end{textblock}
% \only<1->{
% \begin{textblock}{108}(10,18)
% \centering
%   \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_ft_p} 
% \end{textblock}
% }
% 
% \only<1-2>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     m_{f_{t_a}\rightarrow p_1}(p_1) &= \onslide<2->{\iint \mathbb{I}(t_a=p_1+p_2) N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, \Phi(t_a|\mu_b,\sigma_b^2)  \, dt_a  \, dp_2 } \\
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<3>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    m_{f_{t_a}\rightarrow p_1}(p_1) &=\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, \Phi(p_1+p_2|\mu_b,\sigma_b^2)  \, dp_2  \\
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<4-5>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    \onslide<5>{&\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) = \frac{\partial}{\partial p_1} \int  N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, \Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2 } \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<6>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    &\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) = \int  N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, \frac{\partial}{\partial p_1} \Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<7>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    &\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) = \int  N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, N(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% 
% \only<8>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    &\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) = \int  N(p_2|\mu_2, \sigma_2^2 + \beta^2) \, N(p_2|\mu_b-p_1,\sigma_b^2)  \, dp_2  \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<9>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    &\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) =  \int \underbrace{N(\mu_2| \mu_b - p_1, \sigma_b^2 + \sigma_2^2 + \beta^2)}_{\text{const.}} \underbrace{N(p_2 | \mu_*, \sigma_*^2) dp_2}_{1} \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<10->{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%    & m_{f_{t_a}\rightarrow p_1}(p_1) =\int N(p_2|\mu_2, \sigma_2^2 + \beta^2) \,\Phi(p_1|\mu_b-p_2,\sigma_b^2)  \, dp_2  \\
%    &\frac{\partial}{\partial p_1} m_{f_{t_a}\rightarrow p_1}(p_1) =  N(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) \\
%    & \onslide<11->{ m_{f_{t_a}\rightarrow p_1}(p_1) = } \onslide<12>{\Phi(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) } \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% 
% 
% 
% 
% \end{frame}
% 
% \begin{frame}
% \begin{textblock}{108}(10,8)
% \begin{center}
%  \large $m_{f_p \rightarrow s}(s)$
% \end{center}
% \end{textblock}
% \only<1->{
% \begin{textblock}{108}(10,18)
% \centering
%   \includegraphics[width=1\textwidth]{figures/trueskill_factorGraph_2equiops_m_fp_s} 
% \end{textblock}
% }
% 
% \only<1-2>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     m_{f_{p_1}\rightarrow s_1}(s_1) &= \onslide<2->{\int N(p_1|s_1, \beta^2) \, \Phi(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) \, dp_1 } \\
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<3-4>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     & m_{f_{p_1}\rightarrow s_1}(s_1) = \int N(p_1|s_1, \beta^2) \, \Phi(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) \, dp_1  \\
%   & \frac{\partial}{\partial \mu_2} m_{f_{s_1}\rightarrow s_1}(s_1) = \onslide<4>{\int N(p_1|s_1, \beta^2) \, N(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) \, dp_1}
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<5-6>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%     & m_{f_{p_1}\rightarrow s_1}(s_1) = \int N(p_1|s_1, \beta^2) \, \Phi(p_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + \beta^2) \, dp_1  \\
%   & \frac{\partial}{\partial \mu_2} m_{f_{s_1}\rightarrow s_1}(s_1) =  N(s_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + 2\beta^2) \\
%   & \onslide<6>{ m_{f_{p_1}\rightarrow s_1}(s_1) = \Phi(s_1| \mu_b - \mu_2, \sigma_b^2 + \sigma_2^2 + 2\beta^2) }
%    \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<7>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(s_1| \mu_b - \mu_2 , \sigma_b^2 + \sigma_2^2 + 2\beta^2) \color{white}\int &&
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<8>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(s_1| \mu_b - \underbrace{\mu_2}_{\mu_a-\mu_1} , \sigma_b^2 + \underbrace{\sigma_2^2 + 2\beta^2}_{\sigma_a^2 - \sigma_1^2}) \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<9>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(s_1| \mu_b - \mu_a + \mu_1 , \sigma_b^2 + \sigma_a^2 - \sigma_1^2) \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<10>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(s_1|  \underbrace{\mu_b - \mu_a}_{-\delta} + \mu_1 , \underbrace{\sigma_b^2 + \sigma_a^2}_{\vartheta^2} - \sigma_1^2) \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<11>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(s_1|  -\delta + \mu_1 ,\vartheta^2 - \sigma_1^2)   \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<12-13>{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(0|  -\delta + \mu_1 - s_1,\vartheta^2 - \sigma_1^2) \\ 
%      \onslide<13>{& = 1 - \Phi(0| \,  \delta - \mu_1 + s_1 \, ,\vartheta^2 - \sigma_1^2)} & \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% \only<14->{
% \begin{textblock}{118}(5,60)
%   \begin{flalign*}
%      m_{f_{p_1}\rightarrow s_1}(s_1) & = \Phi(0|  -\delta + \mu_1 - s_1,\vartheta^2 - \sigma_1^2) \\[0.2cm] 
%      & = 1 - \Phi(0| \,  \underbrace{\delta - \mu_1 + s_1}_{\hfrac{\text{\tiny Diferencia esperada}}{\text{\tiny parametrizada en $s$}}} \, ,  \underbrace{\vartheta^2 - \sigma_1^2}_{\hfrac{\text{\tiny Sin incertidumbre}}{\text{\tiny respecto de $s$}}}) \\
%      & \onslide<15->{= \text{Probabilidad de ganar si la verdadera habilidad fuera $s_1$}}   \color{white}\int && 
%   \end{flalign*}
%   \end{textblock}
% }
% 
% 
% \end{frame}
% 
% 
% \subsection{Posteriori}
% 
% 
% \begin{frame}
% 
% \only<-7>{
% \begin{textblock}{128}(0,11)
% \begin{equation*}
% \overbrace{P(s_1 \mid r, \text{Modelo})}^{\text{Posteriori}} \propto \overbrace{N(s_1 \, | \, \mu_1, \sigma_1^2) }^{\text{Priori}} \, \overbrace{1-\Phi(0 \, | s_1 - \mu_2 , \vartheta^2 - \sigma_1^2)}^{\text{Verosimilitud}}  \ \  \text{Caso ganador} 
% \end{equation*}
% \end{textblock}
% }
% 
% \begin{textblock}{128}(0,11)
% \only<8->{
% \begin{equation*}
% \overbrace{P(s_2 \mid r, \text{Modelo})}^{\text{Posteriori}} \propto \overbrace{N(s_2 \, | \,\mu_2, \sigma_2^2) }^{\text{Priori}} \, \overbrace{\Phi(0  \, | \mu_1 - s_2, \vartheta^2 - \sigma_1^2)}^{\text{Verosimilitud}}  \ \  \text{Caso perdedor} 
% \end{equation*}
% }
% \end{textblock}
% 
% 
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<2>{\includegraphics[width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<3>{\includegraphics[page=2,width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<4>{\includegraphics[page=3,width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<5>{\includegraphics[page=4,width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<6>{\includegraphics[page=5,width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<7>{\includegraphics[page=6,width=0.49\textwidth]{figures/posterior_win} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,26)
% \centering
% \only<8->{\includegraphics[width=0.49\textwidth]{figures/posterior_loose} 
% }
% \end{textblock}
% 
% \begin{textblock}{128}(0,93)
% \centering
% \only<9>{\tiny Todos los detalles en: \href{https://journals.plos.org/plosone/article/file?type=supplementary&id=info:doi/10.1371/journal.pone.0211014.s002}{Landfried. TrueSkill: Technical Report. 2019} }
% \end{textblock}
% %\includegraphics[width=0.49\textwidth]{figures/posterior_loose}   
% \end{frame}
% 
% 
% 
 
\begin{frame}[plain]
\centering
  \includegraphics[width=0.35\textwidth]{../../aux/static/pachacuteckoricancha.jpg}
\end{frame}


\end{document}



